{% extends 'base.html' %}
{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-6 text-center">
            <div class="bg-glass p-5 rounded-4 border border-light border-opacity-10">
                <h3 class="text-white fw-bold mb-4"><i class="fab fa-pix text-success me-2"></i>Pague com PIX</h3>
                
                <div class="bg-white p-3 rounded-3 d-inline-block mb-4">
                    <img src="{{ qr_image }}" alt="QR Code PIX" class="img-fluid" style="width: 200px;">
                </div>

                <div class="input-group mb-4">
                    <input type="text" class="form-control bg-dark text-white border-secondary" value="{{ qr_code }}" id="pixCode" readonly>
                    <button class="btn btn-outline-primary" onclick="copyPix()">Copiar</button>
                </div>

                <p class="text-muted small mb-4">O pagamento é aprovado instantaneamente após a leitura.</p>

                <form method="POST" action="{% url 'process_payment' order.id %}">
                    {% csrf_token %}
                    <input type="hidden" name="payment_method" value="CARD"> 
                    <button type="submit" class="btn btn-success w-100 fw-bold shadow">
                        <i class="fas fa-magic me-2"></i> Simular Pagamento Feito (DEV)
                    </button>
                </form>

            </div>
        </div>
    </div>
</div>

<script>
    function copyPix() {
        var copyText = document.getElementById("pixCode");
        copyText.select();
        document.execCommand("copy");
        alert("Código PIX copiado!");
    }
</script>
{% endblock %}